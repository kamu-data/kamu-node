<div class="app-main-container" role="main">
    <div class="app-content">
        <div id="dataset-viewer">
            <div class="search-header-container-block"
                 [style]="isMinimizeSearchAdditionalButtons ? 'grid-template-columns: 1fr 0.1fr' : ''">
                <div class="datasetViewTypeToggleGroup">
                    <mat-button-toggle-group name="datasetViewType" aria-label="Dataset View Type">
                        <mat-button-toggle value="overview" [checked]="datasetViewTypeOverview" (click)="onSearchDataset()">Overview</mat-button-toggle>
                        <mat-button-toggle value="metadata" [checked]="datasetViewTypeMetadata" (click)="onSearchMetadata()">Metadata</mat-button-toggle>
                        <mat-button-toggle value="linage" [checked]="datasetViewTypeLinage" (click)="onSearchLinageDataset()">Linage</mat-button-toggle>
                        <mat-button-toggle value="projections" disabled>Projections</mat-button-toggle>
                    </mat-button-toggle-group>
                </div>

                <search-additional-buttons
                        [searchAdditionalButtonsData]="searchAdditionalButtonsData"
                        [isMinimizeSearchAdditionalButtons]="isMinimizeSearchAdditionalButtons"
                        (searchAdditionalButtonsMethod)="onClickSearchAdditionalButton($event)">
                </search-additional-buttons>
            </div>
            <div class="search-result-container">
                <div class="search-result-container__content">

                    <ng-template [ngIf]="datasetViewTypeLinage">
                        <p>List of dependencies</p>
                        <ul>
                            <li *ngFor="let row of getDatasetTree(); let rowIndex = index">
                                    <p>{{row[0]}} -> {{row[1]}}</p>
                            </li>
                        </ul>
                    </ng-template>

                    <ng-template [ngIf]="datasetViewTypeOverview || datasetViewTypeMetadata">
                        <app-dynamic-table [isResultQuantity]="tableData.isResultQuantity"
                                       [isClickableRow]="tableData.isClickableRow"
                                       [resultUnitText]="getResultUnitText()"
                                       [isTableHeader]="tableData.isTableHeader" [tableSource]="tableData.tableSource"
                                       (onSelectDatasetEmit)="onSelectDataset($event)"></app-dynamic-table>
                    </ng-template>

                </div>

                <div class="card">
                    <nav class="navbar navbar-expand">
                        <div class="navbar-nav dataset-info">
                            <ng-template [ngIf]="datasetInfo">
                                <div><b>Created At:</b> <p>{{ momentConverDatetoLocalWithFormat(datasetInfo.createdAt) }}</p></div>
                                <div><b>Last Updated At:</b> <p>{{ momentConverDatetoLocalWithFormat(datasetInfo.lastUpdatedAt) }}</p></div>
                                <div><b>Estimated Size:</b> <p>{{ datasetInfo.estimatedSize | number:'1.0-0' }}</p></div>
                                <div><b>Num Records Total:</b> <p>{{ datasetInfo.numRecordsTotal | number:'1.0-0'}}</p></div>
                                <div><b>Current Watermark:</b> <p>{{ momentConverDatetoLocalWithFormat(datasetInfo.metadata.currentWatermark) }}</p></div>
                            </ng-template>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>

</div>
