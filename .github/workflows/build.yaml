name: build
on: [push]
#on:
#  push:
#    branches:
#      - master
#  pull_request:
#    branches:
#      - master
jobs:
  test_linux:
    name: Test / Linux
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions-rs/toolchain@v1  # Uses rust-toolchain file
      - run: cargo build
      - run: cargo test --verbose
      - run: cat api-server/resources/schema.gql
      - run: git diff-index --quiet HEAD  # Ensure all generated files are up-to-date
